#!/bin/sh

USER_HOME="/home/skk"
CLJR_HOME="/home/skk/.cljr"
CLASSPATH=src:test:.:/home/skk/.cljr

   if [ ! -n "$JVM_OPTS" ]; then
      JVM_OPTS="-Xmx1G"
   fi

   if [ "$DISABLE_JLINE" = "true" ]; then
      JLINE=""
   else
      JLINE="jline.ConsoleRunner"
   fi

if [ "$1" = "repl" -o "$1" = "swingrepl" -o "$1" = "swank" -o "$1" = "run" ]; then
   if [ -n "$CLOJURE_HOME" ]; then
      for f in "$CLOJURE_HOME"/*.jar; do
         CLASSPATH="$CLASSPATH":$f
      done
   fi
   for f in "$CLJR_HOME"/lib/*.jar; do
      CLASSPATH="$CLASSPATH":$f
   done

   if [ "$1" = "repl" ]; then
      java $JVM_OPTS -Dinclude.cljr.repo.jars=false -Duser.home="$USER_HOME" -Dclojure.home="$CLOJURE_HOME" -Dcljr.home="$CLJR_HOME" -cp "$CLASSPATH" $JLINE clojure.main -e "(require 'cljr.main) (cljr.main/initialize-classpath)" -r
   else
      java $JVM_OPTS -Dinclude.cljr.repo.jars=false -Duser.home="$USER_HOME" -Dclojure.home="$CLOJURE_HOME" -Dcljr.home="$CLJR_HOME" -cp "$CLASSPATH" cljr.App $*
   fi
else
   CLASSPATH="$CLASSPATH":"$CLJR_HOME"/cljr.jar
   java $JVM_OPTS -Duser.home="$USER_HOME" -Dclojure.home="$CLOJURE_HOME" -Dcljr.home="$CLJR_HOME" -cp "$CLASSPATH" cljr.App $*
fi

