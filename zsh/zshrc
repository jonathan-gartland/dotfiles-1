export jibx_cp="'/net/home/rcc/skk/work/jibx/lib/bcel.jar:/net/home/rcc/skk/work/jibx/lib/jibx-bind.jar:/net/home/rcc/skk/work/jibx/lib/jibx-extras.jar:/net/home/rcc/skk/work/jibx/lib/jibx-run.jar:/net/home/rcc/skk/work/jibx/lib/qdox-1.6.1.jar:/net/home/rcc/skk/work/jibx/lib/stax-api.jar:/net/home/rcc/skk/work/jibx/lib/wstx-asl.jar:/net/home/rcc/skk/work/jibx/lib/xmlpull_1_1_4.jar:/net/home/rcc/skk/work/jibx/lib/xpp3.jar:/net/home/rcc/skk/work/jibx/starter/bin/'"

# load propmpt
autoload -U promptinit
setopt autocd autopushd pushdignoredups 
promptinit
source ~/.zsh_prompt_termwide
#source ~/p.sh
#prompt clint

bindkey -e


HISTFILE=~/.zshhistory
HISTSIZE=3000
SAVEHIST=3000

## directory stack
DIRSTACKSIZE=10


#
# alias
#
#alias ssh='ssh -X'
alias more='less'

alias stelnet='openssl s_client -state -debug -connect'
alias sign='echo "a2ps --columns=1 -B -f 50 text -o out.ps"'
alias cis='ssh skknight@turing.unh.edu'
alias disk_usage='disk_usage.pl -n 20 * .*??'

alias rm='rm -i'													 
alias cp='cp -i'													 
alias mv='mv -i'													 
alias mkdir='mkdir -p'										 
alias mv='nocorrect mv -i'       # no spelling correction on mv
alias cp='nocorrect cp -i'       # no spelling correction on cp
alias mkdir='nocorrect mkdir' # no spelling correction on mkdir

alias df='df -h'
alias du='du -h'
															 
# The 'ls' family (this assumes you use the GNU ls)
alias ls='ls -hF --color'			 # add colors for filetype recognition
alias la='ls -Al'	 # show hidden files
alias lx='ls -lXB'	# sort by extension	
alias lk='ls -lSr'	# sort by size
alias lc='ls -lcr'	# sort by change time
alias lu='ls -lur'	# sort by access time
alias lR='ls -lR'	 # recursive ls	
alias lr='ls -ltr'	# sort by date DSC
alias lt='ls -lt'	# sort by date ASC
alias lm='ls -al |less'	    # pipe through 'more'
alias ll='ls -l'            
alias tree='tree -Csu'	    # nice alternative to 'ls'										 

alias disk_usage='for i in $(\du -s * .*?? | sort -n | tail -n 20 | cut -f2) ; do du -sh $i ;done'

alias cis='ssh skknight@turing.unh.edu'
alias home='ssh skk@skk.ath.cx'

alias vgrep='grep -nH'
alias vim='/net/home/rcc/skk/local/bin/vim -X'
alias putty='export TERM=putty'
alias today='date +%F'
#alias pida='PYTHONPATH=$HOME/local/lib/python ~/local/bin/pida'


function xtitle ()												 
{															
    case "$TERM" in												
        *term | rxvt)											
	        echo -n -e n "\033]1;$1\007\033]2;$1\007" ;;
        *)										 
	    ;;														 
		esac
}															

function text1p
{
    if [[ $2 == '' ]]; then 
        `a2ps -d --tabsize=4 --highlight-level=heavy --line-numbers=5 --columns=1 -R $1`
    else
        `a2ps --tabsize=4 --highlight-level=heavy --line-numbers=5 --columns=1 -R $1 -o $2`
    fi
}

function text2p
{
    if [[ $2 == '' ]]; then 
        `a2ps -d --tabsize=4 --highlight-level=heavy --line-numbers=5 --columns=2 -r $1`
    else
        `a2ps --tabsize=4 --highlight-level=heavy --line-numbers=5 --columns=2 -r $1 -o $2`
    fi
}

function zh
{
    if [[ $1 != '' ]]; then
        `echo grep -i $1 $HOME/.zshhistory`
    fi
}

function enable_svn_keywords
{
    svn propset svn:keywords "Id" $@
}

# aliases...									 
#alias top='xtitle Processes on $HOST && top'											 
alias make='xtitle Making $(basename $PWD) ; make'								 
alias ncftp="xtitle ncFTP ; ncftp"										 
															 

export PAGER=less													
#
# Environment variables
#

export EDITOR=vim
export VISUAL=vim
export MANPATH=$HOME/local/man:$MANPATH

export TIMEFORMAT=$'\nreal %3R\tuser %3U\tsys %3S\tpcpu %P\n'									
export HISTIGNORE="&:bg:fg:ll:h"											 
export HOSTFILE=$HOME/.hosts		# Put a list of remote hosts in ~/.hosts									 

PATH=$PATH:/usr/sbin:/sbin/:/usr/local/bin/

# rcc
if [[ $(dnsdomainname -y) == "rcc" ]] || [[ $(dnsdomainname -y) == "eos" ]] || [[ $(hostname) == "whitestar.sr.unh.edu" ]]; then 
#

    alias z0='export DISPLAY='zathras.sr.unh.edu:0.0''
    alias c0='export DISPLAY='cheech.sr.unh.edu:0.0''
    alias c1='export DISPLAY='chong.sr.unh.edu:0.0''

    # Layout
    alias layout='cd /web/perl/Lib/Layout2/Core'
    alias layout-sql='cd /web/layout2/sql' 
    alias editor='cd /web/perl/Lib/Layout2/Editor'
    alias modules='cd /web/perl/Lib/Layout2/Modules'


    alias watch='watch -n 1'
    alias nslookup='nslookup -sil'
    alias garnome="source ~/bin/garnome.sh"

    alias pl='tail -f -n 30 ~/.procmail.log'

    alias ssh-display='export DISPLAY=$(cat $HOME/.ssh-display)'

    alias was='cd /usr/local/IBM/WebSphere/AppServer'
    alias ast='/usr/local/IBM/WebSphere/AST/ast'

    # Database aliases
    
    # catlab
    alias catlab-dev='( cd $HOME; gqlplus ***REMOVED*** )'
    alias catlab='( cd $HOME; gqlplus ***REMOVED*** )'

    # eos
    alias eos-dev='( cd $HOME; gqlplus ***REMOVED*** )'
    alias eos='( cd $HOME; gqlplus eos/m0rse@webdb1 )'
    
    # skk ( database user for database testing )
    alias skk='( cd $HOME; gqlplus skk/skk@webdev10g )'

    # layout
    alias layout-dev='( cd $HOME; gqlplus ***REMOVED*** )'

    # events
    alias events-dev='( cd $HOME; gqlplus ***REMOVED*** )'
    alias events='( cd $HOME; gqlplus ***REMOVED*** )'

    # alumni
    alias alumni-dev='( cd $HOME; gqlplus ***REMOVED*** )'
    alias alumni='( cd $HOME; gqlplus ***REMOVED*** )'

    # seagrant
    alias seagrant-dev='( cd $HOME; gqlplus ***REMOVED*** )'
    alias seagrant='( cd $HOME; gqlplus ***REMOVED*** )'

    # fms
    alias fms-dev='***REMOVED***'
    alias fms-win='***REMOVED***'





    export EDITOR=vim
    export svnhandycems="https://svn.sr.unh.edu/svn/HandyCEMS/"
    export svnskk="https://svn.sr.unh.edu/svn/skk/"
    export svneos="https://svn.sr.unh.edu/svn/EOS/"
    export svnseagrant="https://svn.sr.unh.edu/svn/SeaGrant/"
    export svncrms="https://svn.sr.unh.edu/svn/CRMS/"
    export svntv="https://svn.sr.unh.edu/svn/TwinView/"
    export svnproject54="https://svn.sr.unh.edu/svn/Project54/"

    export svnhome="http://skk.ath.cx/svn/"


    if [[ $REMOTEHOST == "spoo.sr.unh.edu" ]]; then
        export TERM=putty
    elif [[ $( echo $SSH_CLIENT | grep "132.177.241.35" > /dev/null ) == 0 ]]; then
        export TERM=putty
    fi

    export MANPATH=$HOME/local/man:$MANPATH
    #export LD_LIBRARY_PATH=$HOME/local/lib:$LD_LIBRARY_PATH

    #export CVSROOT=':pserver:skk@spork.sr.unh.edu:/web/cvs/cvsroot'
    export CVSROOT=':pserver:skk@skk.ath.cx:/home/cvsroot'
   

    #export SQLPATH=~/sql:.


    export CDPATH=.:~:~/work:/webdev:/web:/web1:/web2:/web3:/web4:~/workspace:~/AST/workspace
    export MAIL=/net/home/rcc/skk/Maildir/.AllMail
    export MAILDIR=/net/home/rcc/skk/Maildir

    export stow=$HOME/local/stow
    export PRINTER=decwriter
    export MERGE_MEMIMG_DIR=/tmp
    export MERGE_WINDOWS_SWAPDIR=/tmp


    if [[ -f /usr/local/setup/oracle ]]; then
        FILE=/tmp/setup.oracle.skk
        $HOME/bin/convert_csh_setup_file.py -t zsh -s /usr/local/setup/oracle -d $FILE
        source $FILE
        rm -f $FILE
    elif [[ -f /usr/local/oracle/setup ]]; then
        FILE=/tmp/setup.oracle.skk
        $HOME/bin/convert_csh_setup_file.py -t zsh -s /usr/local/oracle/setup -d $FILE
        source $FILE
        rm -f $FILE
    fi


    export PATH=$HOME/bin:$PATH
    if [[ $(hostname) == 'zathras' ]]; then
        alias gvim='gvim'
        alias vim='vim -X'
    else
        export PATH=$HOME/local/bin:$PATH
        #export PATH=$HOME/local/bin:$PATH:/usr/local/j2sdk1.3.1/bin
        #export JAVA_HOME="/net/home/rcc/skk/local/stow/j2sdk1.4.2_04/"
	#export LD_LIBRARY_PATH=$HOME/local/lib:$LD_LIBRARY_PATH
	export PKG_CONFIG_PATH=$HOME/local/lib/pkgconfig:$PKG_CONFIG_PATH
    fi



    function stowdir()
    {
            stowdir=$stow/$(basename $PWD)
            echo $stowdir
    }

    function phone()
    {
	ssh skk@bluemoon "phone $1"
    }

    function stowdir_local()
    {
            stowdir=/usr/local/stow/$(basename $PWD)
            echo $stowdir
    }
    
    function mysql-cems-dev
    {
        if [[ $# == 0 ]]; then
            echo "Missing hostname for $0"
        else
            mysql -h $1 -u cems_dev -pperpetuity -Dcems_dev -h $*
        fi
    }

    function cdperl
    {
        cd /webdev/$1/perl
    }

    function apachelog_helper
    {
        webdir=$1
        webdir_extra=$2
        filename="$3\\*"
        cmd=$4

	echo "webdir $webdir"

        file=$($HOME/local/bin/zsh -c "find $webdir/$webdir_extra -name $filename 2> /dev/null | grep log | grep -v svn" )
        echo "file $file"
        if [[ -z $file ]]; then
            return 1
        else
            tail -f $file | $cmd
        fi
    }

    function accesslog
    {
        cmd=$(which tee)

        apachelog_helper /webdev $1 access $cmd
        apachelog_helper /web $1 access $cmd
        apachelog_helper /home/web $1 access $cmd
        apachelog_helper /web1 $1 access $cmd
        apachelog_helper /web2 $1 access $cmd
        apachelog_helper /web3 $1 access $cmd
        apachelog_helper /web4 $1 access $cmd
        apachelog_helper /web5 $1 access $cmd

        if [[ $? != 0 ]]; then
            echo "Unable to find access_log or accesslog for $1"
        fi
    }

    function errorlog
    {
        cmd=$( which weblogFilter.pl )
        apachelog_helper /home/web $1 error $cmd
        apachelog_helper /webdev $1 error $cmd
        apachelog_helper /web $1 error $cmd
        apachelog_helper /web1 $1 error $cmd
        apachelog_helper /web2 $1 error $cmd
        apachelog_helper /web3 $1 error $cmd
        apachelog_helper /web4 $1 error $cmd
        apachelog_helper /web5 $1 error $cmd

        if [[ $? != 0 ]]; then
            echo "Unable to find errorlog for $1"
        fi
    }

    function start_synergy
    {
	synergyc whitestar
	killall -9  synergys     
    }


    function tell()
    {
	    
	# Password file change 03/15/2007j
	#file="~ndv2/.tmp.file/.desktop_core"
	#file="~ndv2/.test-i2/.tmp3"
        #if [[ $1 == '' ]]; then 
	#    ccrypt -u $file
        #else
	#    ccrypt -u $file | grep $1
        ##fi
	
	$HOME/bin/rcc-password.pl $*
    }


# home
else
    export svnskk="http://skk.ath.cx/svn/"

    export svnroot="file:///home/svn/repos/"
    export svnrcc="http://zathras.sr.unh.edu/svn/"

    alias lv='viewlog /var/log/syslog'
    alias gvim='gvim -geometry 80x57+2-0'
    alias rcc='ssh zathras.sr.unh.edu'
    alias cvs_gnome='export CVSROOT=':pserver:anonymous@anoncvs.gnome.org:/cvs/gnome'; cvs login'
    alias watch='watch -n 1'
    alias mathematica='mathematica -font "-*-andale mono-*-*-*-*-*-*-*-*-*-*-*-*" -noSplashScreen '

    alias pl='tail -f -n 30 ~/.procmail.log'

    export EDITOR=vim
    export CVSROOT=":pserver:anonymous@anoncvs.gnome.org:/cvs/gnome"
    export NNTPSERVER=news.unh.edu
    export REMOTEHOST=`/bin/hostname`
    export MAIL=/home/skk/Maildir/.MaildirInbox     
    export stow=/usr/local/stow
    export CDPATH=.:~:~/work

    function stowdir()
    {
            stowdir=$stow/$(basename $PWD)
            echo $stowdir
    }
fi

# Other misc settings
LISTMAX=0

## init colors for ls and completion
LS_COLORS='no=00:fi=00:di=01;34:ln=01;36:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:*.lzh=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.gz=01;31:*.bz2=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.avi=01;35:*.fli=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.ogg=01;35:*.mp3=01;35:*.wav=01;35:'
export LS_COLORS

## super mv \o/
autoload zmv

## incremental completion
autoload -U incremental-complete-word

## completion list colors
zmodload -i zsh/complist

## Turn on completion
autoload -U compinit
compinit -d ${HOME}/.zcompdump

## filename suffixes to ignore during completion
fignore=(.o)

## technique
zstyle ':completion:*' completer _complete _correct _approximate

## formatting and messages
zstyle ':completion:*' verbose yes
zstyle ':completion:*' format '%{[33m%}:: %{[1m%}%d%{[0m%}'
zstyle ':completion:*:warnings' format '%{[1;31m%}!! No matches for: %d%{[0m%}'
zstyle ':completion:*' group-name ''

## colors
zstyle ':completion:*' list-colors ${(s.:.)LS_COLORS}

## case-insensitive (all) completion
zstyle ':completion:*' matcher-list 'm:{a-zA-Z}={A-Za-z}' 'r:|[._-]=* r:|=*'

## allow one error in approximate completer
zstyle ':completion:*' max-errors 1

## menu completion only if the prefix is valid
zstyle ':completion:*' insert-unambiguous true

## menu will appear only if there are at least 3 matches
zstyle ':completion:*' menu select=3

## show original command in list
zstyle ':completion:*' original true

## remve trailing slashes after a directory
zstyle ':completion:*' squeeze-slashes true

## on processes completion complete all user processes
zstyle ':completion:*:processes' command 'ps -au$USER'

## add colors to processes for kill completion
zstyle ':completion:*:*:kill:*:processes' list-colors '=(#b) #([0-9]#)*=0=01;32'

zstyle ':completion::complete:*' use-cache 1

# zsh Options

setopt                       \
     NO_all_export           \
        always_last_prompt   \
     NO_always_to_end        \
        append_history       \
     NO_auto_cd              \
        auto_list            \
        auto_menu            \
     NO_auto_name_dirs       \
        auto_param_keys      \
        auto_param_slash     \
        auto_pushd           \
        auto_remove_slash    \
     NO_auto_resume          \
        bad_pattern          \
        bang_hist            \
     NO_beep                 \
        brace_ccl            \
        correct_all          \
     NO_bsd_echo             \
        cdable_vars          \
     NO_chase_links          \
     NO_clobber              \
        complete_aliases     \
        complete_in_word     \
     correct                 \
     NO_correct_all          \
        csh_junkie_history   \
     NO_csh_junkie_loops     \
     NO_csh_junkie_quotes    \
     NO_csh_null_glob        \
        equals               \
        extended_glob        \
        extended_history     \
        function_argzero     \
        glob                 \
     NO_glob_assign          \
        glob_complete        \
     NO_glob_dots            \
        glob_subst           \
        hash_cmds            \
        hash_dirs            \
        hash_list_all        \
        hist_allow_clobber   \
        hist_beep            \
        hist_ignore_dups     \
        hist_ignore_space    \
     NO_hist_no_store        \
        hist_verify          \
     NO_hup                  \
     NO_ignore_braces        \
     NO_ignore_eof           \
        interactive_comments \
	inc_append_history   \
     NO_list_ambiguous       \
     NO_list_beep            \
        list_types           \
        long_list_jobs       \
        magic_equal_subst    \
     NO_mail_warning         \
     NO_mark_dirs            \
     NO_menu_complete        \
        multios              \
        nomatch              \
        notify               \
     NO_null_glob            \
        numeric_glob_sort    \
     NO_overstrike           \
        path_dirs            \
        posix_builtins       \
     NO_print_exit_value     \
     NO_prompt_cr            \
        prompt_subst         \
        pushd_ignore_dups    \
     NO_pushd_minus          \
        pushd_silent         \
        pushd_to_home        \
        rc_expand_param      \
     NO_rc_quotes            \
     NO_rm_star_silent       \
     NO_sh_file_expansion    \
        sh_option_letters    \
        short_loops          \
     NO_sh_word_split        \
     NO_single_line_zle      \
     NO_sun_keyboard_hack    \
        unset                \
     NO_verbose              \
        zle





